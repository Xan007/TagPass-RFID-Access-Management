# Raspberry Pi - Environment Configuration Template (.env.example)
# Copia este archivo a .env y rellena con tus valores reales
# El archivo .env debe estar en .gitignore y NUNCA subirse al repositorio

# Supabase Cloud Configuration
# Obtén estos valores del Supabase Dashboard
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=sb_publishable_your_anon_key_here

# Local Database Path
# Ruta donde SQLite almacenará eventos y bloqueados localmente
LOCAL_DB=/var/local/tagpass.db

# Device Identification
# Si está vacío, usará el hostname de la Raspberry
# DEVICE_NAME: nombre único del dispositivo (ej: rpi-lab-a-reader-1)
# DEVICE_LOCATION: ubicación física (ej: Lab A - Door 1)
DEVICE_NAME=rpi-device-name
DEVICE_LOCATION=Building A - Room 101

# Synchronization Interval (segundos)
# Cada cuánto el worker sincroniza eventos locales al cloud
# Recomendado: 2-30 segundos
SYNC_INTERVAL=2

# Retry Backoff Configuration (segundos)
# Espera exponencial en caso de fallo de conexión
# BACKOFF_MIN: espera inicial (ej: 5s)
# BACKOFF_MAX: espera máxima (ej: 300s = 5 min)
BACKOFF_MIN=5
BACKOFF_MAX=300

# Service Account Credentials
# Crea un usuario en Supabase Auth específico para este dispositivo
# Este usuario debe tener permisos read-only en access_blocks y write en access_events
# IMPORTANTE: No uses el email del admin, crea una cuenta separada
SUPABASE_EMAIL=raspberry1@tagpass.local
SUPABASE_PASSWORD=strong-password-here-change-me

# Session Refresh Interval (segundos)
# Cada cuánto se renueva el JWT token de autenticación
# 1800 = 30 minutos (recomendado)
AUTH_REFRESH_SECONDS=1800

# Requerir autenticación antes de iniciar
# Si true: el dispositivo espera a autenticarse antes de procesar lecturas RFID
# Si false: funciona como anónimo (menos restrictivo)
AUTH_REQUIRED=true

# Polling Interval para bloqueados (segundos)
# Fallback si Realtime WebSocket no funciona
# Cada cuánto consultar manualmente access_blocks desde cloud
POLL_BLOCKS_INTERVAL=15

# GPIO Configuration
# Pin BCM de la Raspberry Pi para controlar relé/cerradura
# BCM 17 es típico (físicamente pin 11)
GPIO_PIN=17

# UART/Serial Configuration
# Puerto serie donde está conectado el lector RFID
# /dev/ttyUSB0 para adaptadores USB-UART
# /dev/ttyAMA0 para UART nativo de RPi (si habilitaste)
UART_PORT=/dev/ttyUSB0
UART_BAUD=9600

# Logging Configuration (opcional)
# LOG_LEVEL=DEBUG  # DEBUG, INFO, WARNING, ERROR
# LOG_FILE=/var/log/tagpass/worker.log
